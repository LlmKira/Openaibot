![cover](https://raw.githubusercontent.com/sudoskys/Openaibot/main/docs/cover.png)


------------------------------------

<p align="center">
  <img alt="License" src="https://img.shields.io/badge/LICENSE-Other-ff69b4">
  <img src="https://img.shields.io/badge/Python-3.7|8|9|10-green" alt="PYTHON" >
  <a href="https://afdian.net/a/Suki1077"><img src="https://img.shields.io/badge/Buyme-milk-DB94A2" alt="SPONSOR"></a>
  <a href="https://app.fossa.com/projects/git%2Bgithub.com%2Fsudoskys%2FOpenaibot?ref=badge_small" alt="FOSSA Status"><img src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fsudoskys%2FOpenaibot.svg?type=small"/></a>
</p>


<h2 align="center">OpenaiBot</h2>

OpenAI Chat Bot For IM. åœ¨ IM ä¸Šä½¿ç”¨ OpenAi äº¤äº’ã€‚

å¦‚æœæ²¡æœ‰æ‚¨çš„å³æ—¶é€šä¿¡å¹³å°æˆ–æ‚¨æƒ³å¼€å‘æ–°åº”ç”¨ä½“ï¼Œæ¬¢è¿æ‚¨è´¡çŒ®æœ¬ä»“åº“ï¼Œæ‚¨å¯ä»¥é€šè¿‡è°ƒåº¦é€šç”¨äº‹ä»¶å±‚å¼€å‘ä¸€ä¸ªæ–°çš„ Controllerã€‚

[EN_README](https://github.com/sudoskys/Openaibot/blob/main/README.EN.md)

æœ¬é¡¹ç›®åˆ©ç”¨ `Api` è®¤è¯ `Token` + ä¸Šä¸‹æ–‡è®°å¿†æ± æ¥å®ç°èŠå¤© ï¼Œå¹¶ä¸æ˜¯ `chatGPT` çš„é€†å‘ï¼Œç±» chatGPT çš„ **Python å®ç°** æ˜¯è‡ªå®ç°ã€‚

```
é‡‡ç”¨ GPT3 + æ³¨å…¥çš„æ–¹å¼å°½é‡é è¿‘ChatGptï¼Œé‡‡ç”¨å¯æ‰©å±•æ¶æ„ï¼Œç­‰åˆ° ChatGPT å•†ä¸šåŒ–åä¼šå³æ—¶åˆ‡è¿›æ–°çš„ Apiï¼Œ
* é è¿‘ chatGPTï¼Œç›®å‰ chatGPT å¹¶æœªå¼€æ”¾æ¥å£ï¼ŒåŸºæœ¬å…¨æ¢æˆè¾¾èŠ¬å¥‡äº†ã€‚
* ä¾èµ–åº“ç”±å®˜æ–¹çš„åŒæ­¥åˆ‡æ¢ä¸ºè‡ªç»´æŠ¤å¼‚æ­¥åº“ã€‚
* é€†å‘æ²¡æœ‰å‡ºè·¯ï¼Œæˆ‘ä»¬çš„ä¼˜åŠ¿æ˜¯èµ°åœ¨å°è¯•çš„æœ€å‰åˆ—ï¼Œæä¾›æˆç†Ÿçš„äº¤äº’ä½“éªŒã€‚
* æ­¤ä»“åº“æ¬¢è¿ä¸€åˆ‡è´¡çŒ®è€…ã€‚
```

[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Fsudoskys%2FOpenaibot.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Fsudoskys%2FOpenaibot?ref=badge_large)

*æœ‰é—®é¢˜è¯·æ›´æ–°ï¼Œç„¶åæäº¤ Issue*

## ç‰¹æ€§

* ç»­å†™ (write)  ç‹¬ç«‹æ¨æµ‹ï¼Œç»­å†™
* èŠå¤© (chat)  è®°å¿†æ¡¶æœºåˆ¶ï¼Œæƒé‡å…³è”åˆ†é…ï¼Œæ›´æ™ºèƒ½çš„ä¸Šä¸‹æ–‡
* æ”¯æŒ Api
* æ”¯æŒç§èŠ
* æ”¯æŒç¾¤èŠ
* å¤šä¸»äººç®¡ç†
* æ”¯æŒé€Ÿç‡é™åˆ¶
* æ”¯æŒå†…å®¹è¿‡æ»¤
* æ”¯æŒç”¨é‡ç®¡ç†
* è®¾å®šå›ºå®šå¤´äººè®¾
* æ”¯æŒç™½åå•ç³»ç»Ÿ
* æ”¯æŒé»‘åå•ç³»ç»Ÿ
* è‡ªå®šä¹‰é£æ ¼åŒ–å¯¹è¯
* å¤šå¹³å°ï¼Œæ³›ç”¨æ€§å¼º
* å®Œå–„çš„å†…å®¹å®‰å…¨åŠŸèƒ½
* å¤šå¹³å°æ”¯æŒçš„é€šç”¨æ¥å£
* æ”¯æŒä¸»åŠ¨å›å¤(For Fun)
* åŠ¨æ€è£å‰ªä¸Šä¸‹æ–‡ï¼Œé˜²æ­¢è¶…é¢
* å¤š Api key è´Ÿè½½ï¼Œä¾¿æ·ç®¡ç†ï¼Œè¶…é¢å¼¹å‡º
* æ’ä»¶åŒ–ï¼Œå®æ—¶å†…å®¹æ”¯æŒï¼Œ Prompt Injectionï¼Œå¯¹Chatæ›´å‹å¥½
* chatGpt æ›¿æ¢ä¸ºè‡ªå·±å†™çš„ chatGpt Openai api Python å®ç°
* å®˜æ–¹ä¾èµ–åº“ä¸æ”¯æŒå¼‚æ­¥ï¼Œå¤§é‡è¯·æ±‚ä¼šé˜»å¡ï¼Œæ›¿æ¢ä¸ºè‡ªå·±å†™çš„å¼‚æ­¥åº“(æœ€è¿‘å®˜æ–¹æ‰æ”¯æŒäº†å¼‚æ­¥)

## ç”¨æ³•

**èŠå¤©**

ğŸ”­åˆ©ç”¨ `/chat + å¥å­` å‘èµ·å¯¹è¯ï¼Œç„¶å**åªéœ€è¦å›å¤**å¯äº¤è°ˆã€‚ç§èŠæ¶ˆæ¯ æˆ– ç¾¤ç»„ 48 å°æ—¶å†…çš„æ¶ˆæ¯ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ä¸Šä¸‹æ–‡è¿›è¡Œæ¨æµ‹å’Œè£å‰ªï¼Œç›´æ¥å›å¤å°±å¯ä»¥ç»§ç»­å¯¹è¯ã€‚

**é‡ç½®**

æ¯æ¬¡ä½¿ç”¨`/forgetme` éƒ½ä¼šé‡ç½® Ai çš„è®°å¿†æ¡¶ã€‚

**ç»­å†™**

ğŸ¥–ä½¿ç”¨ `/write` è¿›è¡Œæ²¡æœ‰ä¸Šä¸‹æ–‡æ¨æµ‹çš„ç»­å†™ã€‚

**Head**

æ”¯æŒåœºæ™¯è®¾ç½®ï¼Œé‡‡ç”¨ `/remind` è®¾è®¡è‡ªå·±çš„è¯·æ±‚å¤´ã€‚ä¾‹å¦‚ `Ai æ‰®æ¼”åœ¨ç©ºé—´ç«™çš„å®‡èˆªå‘˜`ã€‚è®¾å®šå°äº 4 ä¸ªå­—ç¬¦ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚

**Style**

æ”¯æŒåœºæ™¯è®¾ç½®ï¼Œé‡‡ç”¨ `/style` è®¾è®¡è‡ªå·±çš„é£æ ¼ï¼ŒAi
ä¼šå€¾å‘ä½¿ç”¨è¯­æ–™ä¸­çš„è¯æ±‡ï¼Œè¯­æ³•æ˜¯ `(enhance),((enhance pro)),[[weak]],{enhance}ï¼Œ(ä¸­æ–‡é€—å·ä¹Ÿå¯ä»¥)`

*è¿™äº›è®¾å®šçš„è¯´æ˜*

å‘é€åˆ° Api çš„æ ¼å¼ï¼š

```markdown
headï¼ˆä¸å†™é»˜è®¤ä¸º ä¸‹é¢çš„å¯¹è¯æ˜¯äººå’Œ Ai åŠ©æ‰‹çš„å¯¹è¯ï¼‰
nlp å¤„ç†åçš„å…³é”®å¯¹è¯
ä¿ç•™çš„ä¸Šæ–‡ä¸‰æ¡åŸå§‹æ¶ˆæ¯
å¯åŠ¨å¤´ (AI:)
```

## åˆå§‹åŒ–

* æœ¬åœ°æ‹‰å–/æ›´æ–°ç¨‹åº

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½æ¢å¤é…ç½®ï¼Œåœ¨æ ¹ç›®å½•è¿è¡Œï¼ˆä¸è¦åœ¨ç¨‹åºç›®å½•å†…ï¼‰
ï¼Œæ›´æ–°æ—¶å€™é‡æ–°è¿è¡Œå°±å¯ä»¥å¤‡ä»½ç¨‹åºäº†ï¼Œå¦‚æœæ˜¯å°æ›´æ–°å¯ä»¥ç›´æ¥ ``git pull``ã€‚

```shell
curl -LO https://raw.githubusercontent.com/sudoskys/Openaibot/main/setup.sh && sh setup.sh
```

`cd Openaibot`

* [Docker](https://hub.docker.com/r/sudoskys/openaibot)

Docker é•œåƒåœ¨ä¿è¯æƒ…å†µ stable åæ‰ä¼šå‘å¸ƒæ›´æ–°ã€‚

```bash
git clone https://github.com/sudoskys/Openaibot
cd Openaibot
vim Config/service.json # è§ä¸‹é¢
docker compose up -d
```

## é…ç½®

### é…ç½® Redis

**æœ¬æœº**

```shell
apt-get install redis
systemctl start redis.service
```

**Docker**

é…ç½® `service.json` ï¼Œ æ ·æ¿ç¤ºä¾‹åœ¨ä¸‹é¢ï¼Œéœ€è¦å°† `localhost` æ”¹ä¸º `redis`

### é…ç½®ä¾èµ–

```bash
pip install -r requirements.txt
```

`pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple`

### è¿‡æ»¤å™¨

Data/Danger.form ä¸€è¡Œä¸€ä¸ªé»‘åå•è¯æ±‡ã€‚è‡³å°‘è¦æœ‰ä¸€ä¸ªã€‚

å¦‚æœæ²¡æœ‰ï¼Œç¨‹åºä¼šè‡ªåŠ¨ä¸‹æ‹‰äº‘ç«¯é»˜è®¤åå•ï¼Œåç»­çš„ updetect ä¹Ÿä¼šæ‹‰äº‘ç«¯è¦†ç›–æœ¬åœ°ã€‚

ä½ å¯ä»¥é€šè¿‡æ”¾ç½®ä¸€ä¸ªä¸€è¡Œçš„åå•æ¥å…³é—­è¿™ä¸ªè¿‡æ»¤å™¨ï¼Œä½†æ˜¯æˆ‘ä¸èµæˆä½ è¿™æ ·åšã€‚

### é…ç½® Config/app.toml

`cp app_exp.toml app.toml`

`vim app.toml`
`nano app.toml`

**é…ç½®æ–‡ä»¶**

å¤šå¹³å°ã€‚

```toml
# ä¸æƒ³å¯åŠ¨å“ªä¸ªå°±æ³¨é‡Šæ‰é‚£ä¸€éƒ¨åˆ†

# QQ
[Controller.QQ]
master = [114, 514] # master user id , ç®¡ç†è€…è´¦å· ID
account = 0
http_host = 'http://localhost:8080'   # Mirai httpæœåŠ¡å™¨
ws_host = 'http://localhost:8080'   # Mirai WebsocketæœåŠ¡å™¨
verify_key = ""
trigger = false # åˆé€‚çš„æ—¶å€™ä¸»åŠ¨å›å¤
INTRO = "POWER BY OPENAI"  # åç¼€
ABOUT = "Created by github.com/sudoskys/Openaibot" # å…³äºå‘½ä»¤è¿”å›
WHITE = "Group NOT in WHITE list" # é»‘ç™½åå•æç¤º

# Telegram
[Controller.Telegram]
master = [114, 514] # master user id , ç®¡ç†è€…è´¦å· ID
botToken = '' # æœºå™¨äººå¯†é’¥
trigger = false # åˆé€‚çš„æ—¶å€™ä¸»åŠ¨å›å¤
INTRO = "POWER BY OPENAI"  # åç¼€
ABOUT = "Created by github.com/sudoskys/Openaibot" # å…³äºå‘½ä»¤è¿”å›
WHITE = "Group NOT in WHITE list" # é»‘ç™½åå•æç¤º

[Controller.BaseServer]
port = 9559
# æä¾›åŸºç¡€Apiæ¥å£ä¾›Webä½¿ç”¨
```

### é…ç½® Telegram è®¾ç½®

[Telegram botToken ç”³è¯·](https://t.me/BotFather)

ç„¶åå…³é—­éšç§æ¨¡å¼æˆ–è€…ææ‹”æœºå™¨äººä¸ºç®¡ç†å‘˜åæ‰èƒ½ä½¿ç”¨ã€‚

### é…ç½® QQ æœºå™¨äºº

[é…ç½®æœºå™¨äººåç«¯](https://graiax.cn/before/install_mirai.html)

### é…ç½® Openai Api key

`Config/api_keys.json` Api Key

```json
{
  "OPENAI_API_KEY": [
    "sk-***********",
    "sk-***********"
  ]
}
```

å»ºè®®åœ¨æœºå™¨äººç§èŠä¸­é…ç½® key

```markdown
see_api_key - ç°åœ¨å‡ ä¸ª Api key
del_api_key - åˆ é™¤ Api key
add_api_key - å¢åŠ  Api key
```

[OPENAI_API_KEY ç”³è¯·](https://beta.openai.com/account/api-keys)ï¼Œæ”¯æŒå¤š key åˆ†å‘è´Ÿè½½ã€‚
[å®šä»·å‚è€ƒ](https://openai.com/api/pricing/)ã€‚

è¯·ä¸è¦å‘ä»»ä½•äººæš´éœ²ä½ çš„ `Config`

### é…ç½® `service.json`

åœ¨ `Config/service.json` ä¸‹é¢ã€‚å¦‚æœæ²¡æœ‰æ­¤æ–‡ä»¶ï¼Œä¼šä½¿ç”¨é»˜è®¤å€¼è¡¥å…¨ã€‚

**å®ä¾‹**

```json
{
  "redis": {
    "host": "localhost",
    "port": 6379,
    "db": 0,
    "password": null
  },
  "proxy": {
    "status": false,
    "url": "localhost:7890"
  },
  "plugin": {
    "details": "",
    "time": "",
    "week": ""
  },
  "moderation_type": [
    "self-harm",
    "hate",
    "sexual",
    "hate/threatening",
    "sexual/minors",
    "violence",
    "violence/graphic"
  ],
  "tts": {
    "status": true,
    "type": "none",
    "vits": {
      "api": "http://127.0.0.1:9557/tts/generate",
      "limit": 70,
      "model_name": "some.pth",
      "speaker_id": 0
    },
    "azure": {
      "key": [
        ""
      ],
      "limit": 70,
      "speaker": {
        "chinese": "zh-CN-XiaoxiaoNeural"
      },
      "location": "japanwest"
    }
  }
}
```

#### Redis

```json
{
  "host": "localhost",
  "port": 6379,
  "db": 0,
  "password": null
}
```

#### æ’ä»¶

```json
{
  "plugin": {
    "search": [
      "https://www.exp.com/search?word={}"
    ]
  }
}
```

`search` å°±æ˜¯æˆ‘ä»¬è‡ªå¸¦çš„ä¸€ä¸ªæœç´¢æ’ä»¶ï¼Œå¼•æ“éƒ½æ˜¯è¦è‡ªå·±å¡«å†™çš„ã€‚

æ”¾å…¥ `plugin` å­—æ®µçš„æ’ä»¶æ‰ä¼šè¢«å¯ç”¨ã€‚
**éƒ¨åˆ†æ’ä»¶**

| plugins   | desc              | value/server                                          | use                                   |
|-----------|-------------------|-------------------------------------------------------|---------------------------------------|
| `time`    | now time          | `""`,no need                                          | `æ˜æ˜¨ä»Šå¤©`....                            |
| `week`    | week time         | `""`,no need                                          | `å‘¨å‡ ` .....                            |
| `search`  | Web Search        | `["some.com?searchword={}"]`,must need                | `æŸ¥è¯¢` `ä½ çŸ¥é“` len<80 / end with`?`len<15 |
| `duckgo`  | Web Search        | `""`,no need,but need `pip install duckduckgo_search` | `æŸ¥è¯¢` `ä½ çŸ¥é“` len<80 / end with`?`len<15 |
| `details` | answer with steps | `""`,no need                                          | Ask for help `how to`                 |

[æ‰€æœ‰æ’ä»¶](https://github.com/sudoskys/openai-kira#plugin)

#### TTS

```shell
apt-get install ffmpeg
```

- status å¼€å…³
- type ç±»å‹

Azure/Vits è¯­è¨€ç±»å‹ä»£ç å‡ä¸ºäºŒä½å¤§å†™ç¼©å†™å­—æ¯ã€‚

**Azure æ”¯æŒè¯´æ˜**

[å…·ä½“è¯´æ˜](https://azure.microsoft.com/en-us/pricing/details/cognitive-services/speech-services/)

- azure:limit é•¿åº¦å†…çš„æ–‡æœ¬ä¼šè¢«è½¬æ¢
- azure:speaker
  è¯´è¯äºº, [æ‰€æœ‰å£°éŸ³å¼•æ“åˆ—è¡¨](https://learn.microsoft.com/en-us/azure/cognitive-services/speech-service/language-support?tabs=stt-tts)
- auzre:location æœåŠ¡å™¨èµ„æºåœ°å€
- auzre:key api key

**VITS è¯­éŸ³æ”¯æŒè¯´æ˜**

Api åç«¯è¯·ä½¿ç”¨æˆ‘æ‰“åŒ…æ”¹é€ çš„ MoeGoe https://github.com/sudoskys/MoeGoe æœ¬æœºè¿è¡Œ

- vits:limit é•¿åº¦å†…çš„æ–‡æœ¬æ‰ä¼šè¢«è½¬æ¢
- vits:model_name æ¨¡å‹åå­—ï¼Œsome.pth,åœ¨ model æ–‡ä»¶å¤¹ä¸‹çš„
- vits:speaker_id è¯´è¯äººçš„ID,å…·ä½“çœ‹æ¨¡å‹config

å®‰è£…ä¾èµ–ï¼Œè¿è¡Œ `server.py` æ–‡ä»¶å¯ä»¥é»˜è®¤ä½¿ç”¨ã€‚
æ¨¡å‹ä¸‹è½½è¯·è‡ªè¡Œå¯»æ‰¾ï¼Œå¹¶æ³¨æ„æ¨¡å‹ç›¸åº”çš„åè®®ã€‚ å¦‚æœä¸ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯æ–‡æœ¬çš„é•¿åº¦è¶…è¿‡äº†è®¾å®šçš„ limit(`len()`) ã€‚

## è¿è¡Œ

* è¿è¡Œ

```shell
nohup python3 main.py > /dev/null 2>&1 & 
```

* æŸ¥çœ‹è¿›ç¨‹

```shell
ps -aux|grep python3
```

* ç»ˆæ­¢è¿›ç¨‹
  ååŠ è¿›ç¨‹å·ç 

```shell
kill -9 id
```

## å‘½ä»¤

é™åˆ¶ç±»è®¾ç½®è®¾å®šä¸º `1` ä»£è¡¨ä¸ç”Ÿæ•ˆã€‚

| å‘½ä»¤                                 | ä½œç”¨                   | é¢å¤–                               |
|------------------------------------|----------------------|----------------------------------|
| `/set_user_cold`                   | è®¾ç½®ç”¨æˆ·å†·å´æ—¶é—´             | æ—¶é—´å†…ä¸èƒ½å‘é€         1 ä¸ºæ— é™åˆ¶           |
| `/set_group_cold`                  | è®¾ç½®ç¾¤ç»„å†·å´æ—¶é—´             | æ—¶é—´å†…ä¸èƒ½å‘é€            1 ä¸ºæ— é™åˆ¶        |
| `/set_token_limit`                 | è®¾ç½®è¾“å‡ºé™åˆ¶é•¿åº¦             | Api çš„ 4095 é™åˆ¶æ˜¯è¾“å…¥+è¾“å‡ºï¼Œå¦‚æœè¶…é™ï¼Œé‚£ä¹ˆè¯·è°ƒå°è¾“å‡º |
| `/set_input_limit`                 | è®¾ç½®è¾“å…¥é™åˆ¶é•¿åº¦             |                                  |
| `/config`                          | è·å–/å¤‡ä»½ config.json æ–‡ä»¶ | å‘é€æ–‡ä»¶                             |
| `/add_block_group`      +id ç»å¯¹å€¼    | ç¦æ­¢                   | ç›´æ¥ç”Ÿæ•ˆ         å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²          |
| `/del_block_group`       +id ç»å¯¹å€¼   | è§£ç¦                   | ç›´æ¥ç”Ÿæ•ˆ          å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²         |
| `/add_block_user`     +id ç»å¯¹å€¼      | ç¦æ­¢                   | ç›´æ¥ç”Ÿæ•ˆ           å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²        |
| `/del_block_user`     +id ç»å¯¹å€¼      | è§£ç¦                   | ç›´æ¥ç”Ÿæ•ˆ           å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²        |
| `/add_white_group`     +id ç»å¯¹å€¼     | åŠ å…¥                   | éœ€è¦å¼€å¯ç™½åå•æ¨¡å¼ç”Ÿæ•ˆ       å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²     |
| `/add_white_user`      +id ç»å¯¹å€¼     | åŠ å…¥                   | éœ€è¦å¼€å¯ç™½åå•æ¨¡å¼ç”Ÿæ•ˆ       å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²     |
| `/del_white_group`     +id ç»å¯¹å€¼     | é™¤å                   | éœ€è¦å¼€å¯ç™½åå•æ¨¡å¼ç”Ÿæ•ˆ        å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²    |
| `/del_white_user`      +id ç»å¯¹å€¼     | é™¤å                   | éœ€è¦å¼€å¯ç™½åå•æ¨¡å¼ç”Ÿæ•ˆ      å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²      |
| `/update_detect`                   | æ›´æ–°æ•æ„Ÿè¯                |                                  |
| `/open_user_white_mode`            | å¼€ç”¨æˆ·ç™½åå•               |                                  |
| `/open_group_white_mode`           | å¼€ç¾¤ç»„ç™½åå•               |                                  |
| `/close_user_white_mode`           | å…³ç”¨æˆ·ç™½åå•               |                                  |
| `/close_group_white_mode`          | å…³ç¾¤ç»„ç™½åå•               |                                  |
| `/open`                            | å¼€å¯æœºå™¨äºº                |                                  |
| `/close`                           | å…³é—­æœºå™¨äºº                |                                  |
| `/chat`                            | å¯¹è¯                   | æ¯æ¬¡/chat å‘èµ·å¯¹è¯ï¼Œç§èŠåˆ™æ°¸ä¹…ã€‚              |
| `/write`                           | ç»­å†™                   | ç»­å†™ã€‚                              |
| `/see_api_key`                     | ç°åœ¨å‡ ä¸ª Api key         |                                  |
| `/remind`                          | äººè®¾                   | å›ºå®šçš„æç¤ºè¯ã€‚                          |
| `/del_api_key`       +key          | åˆ é™¤ Api key           | å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²                       |
| `/add_api_key`           +key      | å¢åŠ  Api key           | å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²                       |
| `/set_per_user_limit`              | ç”¨æˆ·åˆ†é…æ€»é¢åº¦              | 1 ä¸ºæ— é™åˆ¶            æŒ‰ç”¨æˆ·è®¡é‡          |
| `/set_per_hour_limit`              | ç”¨æˆ·å°æ—¶å¯ç”¨é‡              | 1 ä¸ºæ— é™åˆ¶              æŒ‰ç”¨æˆ·è®¡é‡        |
| `/reset_user_usage`+userID         | é‡ç½®ç”¨æˆ·åˆ†é…é¢åº¦             | æŒ‰ç”¨æˆ·è®¡é‡          å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²        |
| `/promote_user_limit`+userID+limit | æå‡ç”¨æˆ·çš„é¢åº¦              | æŒ‰ç”¨æˆ·è®¡é‡  1 ä¸ºé»˜è®¤        å¯è·Ÿå¤šå‚æ•°ï¼Œç©ºæ ¼åˆ†å‰²   |
| `/change_head`                     | è®¾å®šå¤´                  | ç”¨æˆ·å†æ¬¡è®¾å®šä¼šé‡ç½®ä¸ºç©º                      |
| `/change_style`                    | è®¾å®šå¤´                  | ç”¨æˆ·å†æ¬¡è®¾å®šä¼šé‡ç½®ä¸ºç©º                      |
| `/forgetme`                        | å¿˜è®°æˆ‘                  |                                  |
| `/voice`                           | VITS/AZURE  TTS      |                                  |
| `/trigger`                         | ä¸»åŠ¨å›å¤æ¨¡å¼               | å…¨å±€è®¾ç½®æˆ–/åªæœ‰ç®¡ç†ç»„æˆå‘˜å¯ä»¥å¯åŠ¨æœ¬ç¾¤æ¨¡å¼            |
| `/style`                           | é£æ ¼åŒ–æŒ‡å®š                | å…¨å±€è®¾ç½®æˆ–/ç”¨æˆ·è®¾ç½®                       |
| `/auto_adjust`                     | è‡ªåŠ¨ä¼˜åŒ–                 | owner                            |

### æ ·è¡¨

```markdown
chat - äº¤è°ˆ
write - ç»­å†™
forgetme - é‡ç½®è®°å¿†
remind - åœºæ™¯è®¾å®š å–æ¶ˆç”¨çŸ­æ–‡æœ¬è¦†ç›–
voice - è¯­éŸ³æ”¯æŒ
trigger - ç®¡ç†å‘˜å¯åŠ¨ä¸»åŠ¨å›å¤
style - è®¾å®šåå¥½è¯
auto_adjust - è‡ªåŠ¨ä¼˜åŒ–å™¨
set_user_cold - è®¾ç½®ç”¨æˆ·å†·å´æ—¶é—´
set_group_cold - è®¾ç½®ç¾¤ç»„å†·å´æ—¶é—´
set_token_limit - è®¾ç½®è¾“å‡ºé™åˆ¶é•¿åº¦
set_input_limit - è®¾ç½®è¾“å…¥é™åˆ¶é•¿åº¦
see_api_key - ç°åœ¨å‡ ä¸ª Api key
del_api_key - åˆ é™¤ Api key
add_api_key - å¢åŠ  Api key
config - è·å–/å¤‡ä»½çƒ­é…ç½®æ–‡ä»¶
set_per_user_limit - è®¾ç½®æ™®é€šç”¨æˆ·é¢åº¦
set_per_hour_limit - è®¾ç½®ç”¨æˆ·å°æ—¶é¢åº¦
promote_user_limit - æå‡ç”¨æˆ·é¢åº¦
reset_user_usage - é‡ç½®ç”¨æˆ·é¢åº¦
add_block_group - ç¦æ­¢ç¾¤ç»„
del_block_group - è§£ç¦ç¾¤ç»„
add_block_user - ç¦æ­¢ç”¨æˆ·
del_block_user - è§£ç¦ç”¨æˆ·
add_white_group - åŠ å…¥ç™½åå•ç¾¤ç»„
add_white_user - åŠ å…¥ç™½åå•ç”¨æˆ·
del_white_group - é™¤åç™½åå•ç¾¤
del_white_user - é™¤åç™½åå•äºº
update_detect - æ›´æ–°æ•æ„Ÿè¯
open_user_white_mode - å¼€ç”¨æˆ·ç™½åå•
open_group_white_mode - å¼€ç¾¤ç»„ç™½åå•
close_user_white_mode - å…³ç”¨æˆ·ç™½åå•
close_group_white_mode - å…³ç¾¤ç»„ç™½åå•
open - å¼€å¯æœºå™¨äºº
close - å…³é—­æœºå™¨äºº
change_head - è®¾å®šäººè®¾å¼€å…³
change_style - è®¾å®šé£æ ¼å¼€å…³
help - å¸®åŠ©
```

## API

è¯·å‚é˜… https://github.com/sudoskys/Openaibot/blob/main/docs/API.md æŸ¥çœ‹å¼€æ”¾APIæ–‡æ¡£ã€‚
APIæœåŠ¡å™¨ä¸Telegram BotæœåŠ¡å¼€å‘è¿›åº¦ä¸ä¸€ï¼Œé€šå¸¸ä¸ºTelegram
Botå‡ºç°æ–°commitåAPIæœåŠ¡å™¨éšåé€‚é…ã€‚å½“æŸäº›å¯¼å…¥æ¨¡å—å‘ç”Ÿå˜åŠ¨æ—¶ï¼ŒAPIæœåŠ¡å™¨å¯èƒ½æ— æ³•æ­£å¸¸è¿è¡Œã€‚æ­¤æƒ…å†µä¸‹ï¼Œæ‚¨å¯åˆ‡æ¢è‡³apiserveråˆ†æ”¯è·å–ç¨³å®šç‰ˆAPIæœåŠ¡å™¨ã€‚

## ä¸­é—´ä»¶å¼€å‘

åœ¨è®°å¿†æ± å’Œåˆ†æ ä¹‹é—´æœ‰ä¸€ä¸ª ä¸­é—´ä»¶ï¼Œå¯ä»¥æä¾›ä¸€å®šçš„è”ç½‘æ£€ç´¢æ”¯æŒå’Œæ“ä½œæ”¯æŒã€‚å¯ä»¥å¯¹æ¥å…¶ä»– Api çš„æœåŠ¡è¿›è¡ŒåŠ æ–™ã€‚

https://github.com/sudoskys/openai-kira#plugin-dev

## å…¶ä»–

### å¤š Controller åŸŸæŒ‡æ•°

| Controller | suffix_id | desc |
|------------|-----------|------|
| QQ         | 101       |      |
| Telegram   | 100       |      |
| Api        | 103       |      |

### ç»Ÿè®¡ `analysis.json`

å¦‚æœæ²¡æœ‰è¯·æ–°å»ºå¡«å……`{}`

æ­¤æ–‡ä»¶ä¸ºé¢‘ç‡ç»Ÿè®¡ï¼Œä¸º 60s å†…çš„è¯·æ±‚æ¬¡æ•°ã€‚

ç”¨æˆ·åœ¨ä½¿ç”¨æ—¶ï¼Œ `total usage`ä¼šè¢«æ›´æ–°åˆ°æ­¤æ–‡ä»¶ã€‚å¦‚æœä½ è¦å¤‡ä»½ç”¨é‡æ•°æ®ï¼Œè¯·å¤‡ä»½ Redis æ•°æ®åº“ã€‚

### é…ç½®æ–‡ä»¶ `Config.json`

éœ€è¦ç»å¸¸ä½¿ç”¨å‘½ä»¤å¤‡ä»½ã€‚å¦‚æœæ²¡æœ‰è¯·æ–°å»ºå¡«å……`{}`æˆ–åˆ é™¤ï¼Œä¼šè‡ªåŠ¨åˆå¹¶ç¼ºå¤±çš„é”®å€¼è¿›è¡Œä¿®å¤ã€‚

### é»˜è®¤å‚æ•°

- ç¾¤ç»„å›å¤è®°å¿†ä¸º 48 hours
- ç”¨é‡é™åˆ¶ä¸º 15000/h
- äººè®¾è®°å¿†åŠ›ä¸ºæ°¸ä¹…ï¼Œè¿½æº¯è®°å¿†æ˜¯ 80

### prompt_server.py

å¤–è®¾çš„ Prompt è£å‰ªæ¥å£ï¼Œç»™å…¶ä»–é¡¹ç›®æä¾›æ”¯æŒã€‚

### QuickDev

Quick Dev by MVC æ¡†æ¶ https://github.com/TelechaBot/BaseBot

### ä¸Šä¸€æ¬¡çš„æ€§èƒ½åˆ†æ

**æ—¥å¸¸è´Ÿè½½å†…å­˜ 316MB**

## æ„Ÿè°¢

- è´¡çŒ®è€…
- [æ–‡æœ¬åˆ†æå·¥å…·åº“](https://github.com/murray-z/text_analysis_tools)
- [MoeGoe Voice](https://github.com/CjangCjengh/MoeGoe)

## CLAUSE

CLAUSE è¯´æ˜äº†å¦‚ä½•æˆæƒï¼Œå£°æ˜ï¼Œé™„åŠ æ¡æ¬¾ç­‰å†…å®¹ã€‚

![CLAUSE](https://github.com/sudoskys/Openaibot/main/CLAUSE.md)
